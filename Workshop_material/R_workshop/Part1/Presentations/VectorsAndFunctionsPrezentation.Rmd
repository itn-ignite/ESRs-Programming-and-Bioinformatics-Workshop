---
title: "Inroduction to R"
author: "Maja Kuzman"
date: "`r Sys.Date()`"
output:
  xaringan::moon_reader:
    lib_dir: libs
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r setup, include=FALSE}
options(htmltools.dir.version = FALSE)
```

class: inverse, center, middle

# R, Rstudio, Rmd

---
### How can we use R and RStudio?  

- console   
- script   
- notebook:   
     new chunk: ctrl + ALT + i 

--
### What can we do with R? 

-  We can use R as a calculator!  

### Try it:  
     
Add a new chunk to line 66.   
Calculate the result of 13%/%3 and 13%%3. 

--

*We can even do better than that...* 

---
class: inverse, center, middle

# Variables and data structures

---
### Variables 


```{r}
myFirstNumber <- 0.1
myFirstVector <- c(2, 3, 7, 8)

```

--

-> Environment  
-> call the variable by name  
-> print() function  
-> one line, part of code shaded and CTRL +ENTER

```{r}
myFirstNumber
print(myFirstNumber)

```

---
class: middle, center

### Data structures in R  

vectors  
list
matrix  
data.frame  
factors  

---
### Vectors 

```{r}
nVec <- c(1, 5, 7, 9, 12.5) # numeric vector
cVec <- c("a", "b", "some words") # character vector
lVec <- c(TRUE, FALSE, T, T, F) # logical vector

vvec <- c(1,5, "nesto")
vvec
```

```{r}
nVec
cVec
lVec
```

---

### Matrices  

Matrices are tables that have rows and columns and store elements of same type.
```{r}
y <- matrix(1:20, nrow=5,ncol=4)
y
```


---

### Data frames

```{r}
mydf <- data.frame( firstColumn = c(1,5,7),
                    secondColumn = c("a","b","third Element"))
mydf
```

---

### Lists


```{r}
l <- list(firstElement = c(1,5,44,6),
          second = c("a", 3),
          y)
l

```
---

### Factors

```{r}

gender <- c(rep("male",20), rep("female", 30)) 
gender <- factor(gender) 
gender
```


```{r}
gender[2] <- "unknown"
gender

as.numeric(gender)
```

---

### Factors  

If something is weird, factors are the usual suspects.. 


```{r}
xx <- factor(sample(1:15,20, replace = T))
xx
```

--

If you want a normal numeric vector:
```{r}
as.numeric(xx)

```

--

you should do this... 

```{r}
as.numeric(as.character(xx))

```

---
class: center, middle, inverse  


# Vectors

## The basics

---
### What we can do with vectors:  

#### Make a vector c()  


You can make a vector by using the function c() (concatenate). Here is an example of vectors myFirstvector, and myFirstSequence:

```{r}
myFirstVector <- c("some words","p","word", "last one")
myFirstSequence <- 1:4

```

---

## Subsetting [ ]

Print the whole vector

```{r}
myFirstVector
myFirstSequence

```

Print third element in a vector
```{r}
myFirstVector[3]
myFirstSequence[3]

```

---

### Access multiple elements:  

Provide a vector of positions to look at:  
```{r}
myFirstVector
```

```{r}
myFirstVector[c(1,3)]


```

```{r}
somePositions <- c(1,3)
somePositions
```

```{r}
myFirstVector[somePositions]

```

---

### Exercise! 

1. Create a vector named myvector that contains numbers 15,16,17,18 and 20.  
2. Get first and third number in the vector by subsetting.  

(line 222 in the document)  

Solution: 

--

```{r}
myvector <- c(15:18,20) 
myvector[c(1,3)]

```

or like this..

```{r}
thosePositions <- c(1,3)
myvector[thosePositions]
```

or like this:

```{r}
myvector[c(TRUE,FALSE,TRUE,FALSE,FALSE)]
```

---

### Think about it!

#### What happened here??:
```{r, eval=FALSE}
someothervector <- c(1,0,1,0,1)
myFirstVector[someothervector]
myFirstVector[as.logical(someothervector)]

```

--

```{r, echo=FALSE}
someothervector <- c(1,0,1,0,1)
myFirstVector[someothervector]
myFirstVector[as.logical(someothervector)]

```

---

### Basic operation on vectors  

Same as on numbers:  
\+  
\-  
/  
\*  

Example:   

#### Multiplication  by constant  

```{r}
someothervector * 0.5

```

---

#### Multiplication by other vector:

I) SAME size  

```{r}
someothervector
someothervector * 1:5

```

II) DIFFERENT size : recycling *because why not.*

```{r}
someothervector*c(0.3,0.1)
c(1,2,3,4,5,6) * 1:2 # doesnt produce a warning
```

---

### Basic comparisons  

The following will return a logical vector for every compared position:

```{r}
someothervector == 1
```

```{r}
someothervector == c(1,0,1,0,1)

```

```{r}
someothervector>0

```

--

#### what happened here?  

```{r}
someothervector[someothervector>0]

```

---
### Exercise: Multiplication, recycling and comparison.   
1. Multiply your myvector by c(0.1, 0.2)  
     -> what do you expect to get??
2. Check if you get what you expected by comparing it to vector you expect to get :)   

(line ~ 289)  

Solution:  

--

```{r}
result <- myvector*c(0.1,0.2)
```

```{r}
result==c(1.5, 3.2, 1.7, 3.6, 2.0)
```
 ... 

--

WHAT?

---

### Exercise: Multiplication, recycling and comparison.   
1. Return only ELEMENTS in myvector that are smaller then 17.
     -> hint - use subsetting and comparison. 


```{r, eval=FALSE}
myvector[ ??? ]
```

We want to get this:


```{r, echo=FALSE}
myvector[ myvector<17 ]
```

---

### Exercise: Multiplication, recycling and comparison.   
1.  


```{r, eval=FALSE}
myvector[ ??? ]
```

We want to get this:


```{r, echo=FALSE}
myvector[ myvector<17 ]
```


---

### Logical operators

AND: & 

```{r, echo=FALSE}
data.frame('first_second'=c(TRUE, FALSE),
           'TRUE'=c(TRUE, FALSE),
           'FALSE'=c(FALSE, FALSE))

```

OR: |  

```{r, echo=FALSE}
data.frame('first_second'=c(TRUE, FALSE),
           'TRUE'=c(TRUE, TRUE),
           'FALSE'=c(TRUE, FALSE))

```

NOT: ! 
TRUE -> FALSE  
FALSE -> TRUE 

They are used in a following way: 

```{r, eval=FALSE}
firstLogical <- c(TRUE, TRUE, FALSE, FALSE) 
secondLogical <- c(TRUE, FALSE, TRUE, FALSE)
firstLogical & secondLogical
firstLogical | secondLogical
! firstLogical

```

---

### Exercise: Subset by logical indexes
1. Return all the elements from your vector that are divisable by 3.  
2. Return all the elements from your vector that are divisable by 3 OR NOT divisable by 2.  


remember:  
     x == 0 - where is x equal to 0  
     x%%5 -> gives you the modulo while dividing x by 5  

Solution?  
 (around line 333)   

--

```{r}
myvector[myvector%%3==0]
```

---

### Exercise: Subset by logical indexes
Return all the elements from your vector that are divisable by 3 OR NOT divisable by 2.

remember:  
     x == 0 - where is x equal to 0  
     x != 0 - not equal to   

Solution:  

--

```{r}
myvector[(myvector%%3==0)| (myvector%%2!=0)]
```


---
class: inverse, center, middle

## Functions 
#### Some useful functions  

---

### names

Assigns names to elements or returns names for elements.  

```{r}
names(someothervector) 
names(someothervector) <- c("one", "one","one", "zero","zero")
someothervector
```

*Use it wisely*  

--

You can subset by names.. kind of.

--

```{r}
someothervector["one"]

```

---

### length - Gives you the length of the vector:    

```{r}
length(someothervector)

```

--

### unique -Gives you all unique elements in your vector:   
```{r}
unique(someothervector)
```

--
### table : gives you list of all elements and counts them  

```{r}
table(someothervector)
```

---
## Math:  


```{r}
sum(someothervector)
mean(someothervector)
sd(someothervector)
summary(someothervector)
```


---

## more random math:  

### sample - gives you random numbers from a vector
```{r}
sample(1:100, 10)
```

--

### rnorm - gives you 10 random numbers from normal distribution with mean=0 and sd=1  

```{r}
rnorm(10, mean = 0, sd = 1)
```

--

analogously, rpois, runif

```{r}
runif(n = 10, min=10, max=20)
rpois(n = 10, lambda = 2)
```

---

#### Example usage: IS MY DATA NORMAL?  

```{r}
somedata <- c(1:10, 1:7, 1:5)
plot(density(somedata))
```

*yeah, looks pretty normal...*  

--- 

### Exercise:  
Lets double check..  

around line 430   

- get 30000 random points from normal distribution and save them in a vector prettyNormal.  
- plot the density for your prettyNormal data vector.  
- n the same graph plot the density of your data.  

---
Solution:


```{r}
plot(density(rnorm(30000, mean=4.5, sd=2.5)), col=2)
lines(density(somedata))
```

---
class: inverse, middle, center

## HELP!!??!!

---

### HELP!!??!!

```{r, eval=FALSE}
?rnorm
example(rnorm)
```
---

###  Exercise - estimate pi

```{r, echo=FALSE}
x <- seq(-1, 1, 0.01)
y <- seq(-1, 1, 0.01)

plot(x,y, xlim = c(-1,1), ylim=c(-1,1), type='n', asp = 1)
curve((  1 * (1 - x^2)^0.5 ), add=TRUE, from=-1 , to =1)
curve(( -1 * (1 - x^2)^0.5 ), add=TRUE, from=-1 , to =1)
rect(-1,-1,1,1)

```

---
class: center, middle, inverse  
### Functions     
#### Open a new notebook 

#### :)




